<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>神策数据分析简介及其应用 | james9527的前端日志</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="https://github.githubassets.com/favicon.ico">
    <meta name="description" content="欢迎访问我的前端日志~">
    <meta name="theme-color" content="#3eaf7c">
    
    <link rel="preload" href="/assets/css/0.styles.323fc85a.css" as="style"><link rel="preload" href="/assets/js/app.283f9e00.js" as="script"><link rel="preload" href="/assets/js/2.cf4fc302.js" as="script"><link rel="preload" href="/assets/js/66.9b2fff6b.js" as="script"><link rel="prefetch" href="/assets/js/10.57db1124.js"><link rel="prefetch" href="/assets/js/11.9a8c3416.js"><link rel="prefetch" href="/assets/js/12.36137e9b.js"><link rel="prefetch" href="/assets/js/13.b2004519.js"><link rel="prefetch" href="/assets/js/14.659dc65b.js"><link rel="prefetch" href="/assets/js/15.2652d2db.js"><link rel="prefetch" href="/assets/js/16.d6c5f911.js"><link rel="prefetch" href="/assets/js/17.d4188079.js"><link rel="prefetch" href="/assets/js/18.e75dbabc.js"><link rel="prefetch" href="/assets/js/19.9a44ab06.js"><link rel="prefetch" href="/assets/js/20.a725d8a9.js"><link rel="prefetch" href="/assets/js/21.19d529db.js"><link rel="prefetch" href="/assets/js/22.6531ba33.js"><link rel="prefetch" href="/assets/js/23.e896325e.js"><link rel="prefetch" href="/assets/js/24.5b2997d9.js"><link rel="prefetch" href="/assets/js/25.8132ce56.js"><link rel="prefetch" href="/assets/js/26.d82843cc.js"><link rel="prefetch" href="/assets/js/27.755801db.js"><link rel="prefetch" href="/assets/js/28.e0f2fe42.js"><link rel="prefetch" href="/assets/js/29.9e3e964e.js"><link rel="prefetch" href="/assets/js/3.4f1bfa5f.js"><link rel="prefetch" href="/assets/js/30.0d93d8c0.js"><link rel="prefetch" href="/assets/js/31.5a258105.js"><link rel="prefetch" href="/assets/js/32.01eccdfc.js"><link rel="prefetch" href="/assets/js/33.8bdc1d13.js"><link rel="prefetch" href="/assets/js/34.42dd9500.js"><link rel="prefetch" href="/assets/js/35.068b72f2.js"><link rel="prefetch" href="/assets/js/36.9a71a693.js"><link rel="prefetch" href="/assets/js/37.0fb0d67b.js"><link rel="prefetch" href="/assets/js/38.ddc45527.js"><link rel="prefetch" href="/assets/js/39.27efda84.js"><link rel="prefetch" href="/assets/js/4.dee10380.js"><link rel="prefetch" href="/assets/js/40.6a51707b.js"><link rel="prefetch" href="/assets/js/41.01317f9f.js"><link rel="prefetch" href="/assets/js/42.53532a55.js"><link rel="prefetch" href="/assets/js/43.2bc63cb8.js"><link rel="prefetch" href="/assets/js/44.98288f4e.js"><link rel="prefetch" href="/assets/js/45.3e342d9d.js"><link rel="prefetch" href="/assets/js/46.9f2f2178.js"><link rel="prefetch" href="/assets/js/47.ed65ba47.js"><link rel="prefetch" href="/assets/js/48.eeb0142e.js"><link rel="prefetch" href="/assets/js/49.14392009.js"><link rel="prefetch" href="/assets/js/5.8ac07946.js"><link rel="prefetch" href="/assets/js/50.d5ff2da0.js"><link rel="prefetch" href="/assets/js/51.dcb0a9fc.js"><link rel="prefetch" href="/assets/js/52.e82abfb9.js"><link rel="prefetch" href="/assets/js/53.763c3c23.js"><link rel="prefetch" href="/assets/js/54.ab02438d.js"><link rel="prefetch" href="/assets/js/55.ac67b7a9.js"><link rel="prefetch" href="/assets/js/56.73c510d5.js"><link rel="prefetch" href="/assets/js/57.1509ddd1.js"><link rel="prefetch" href="/assets/js/58.e3a68eb7.js"><link rel="prefetch" href="/assets/js/59.1146655a.js"><link rel="prefetch" href="/assets/js/6.6de9bd08.js"><link rel="prefetch" href="/assets/js/60.a9097dd5.js"><link rel="prefetch" href="/assets/js/61.fa9e23f4.js"><link rel="prefetch" href="/assets/js/62.37d68d68.js"><link rel="prefetch" href="/assets/js/63.572df829.js"><link rel="prefetch" href="/assets/js/64.1b72b1c0.js"><link rel="prefetch" href="/assets/js/65.fd79b640.js"><link rel="prefetch" href="/assets/js/67.04661d8a.js"><link rel="prefetch" href="/assets/js/68.fe48f321.js"><link rel="prefetch" href="/assets/js/69.36199326.js"><link rel="prefetch" href="/assets/js/7.353968d1.js"><link rel="prefetch" href="/assets/js/70.5168cc3f.js"><link rel="prefetch" href="/assets/js/71.ab3249b5.js"><link rel="prefetch" href="/assets/js/72.39dfcf5c.js"><link rel="prefetch" href="/assets/js/8.2ec57bc2.js"><link rel="prefetch" href="/assets/js/9.841d4d9d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.323fc85a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">james9527的前端日志</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="个人简历" class="dropdown-title"><span class="title">个人简历</span> <span class="arrow down"></span></button> <button type="button" aria-label="个人简历" class="mobile-dropdown-title"><span class="title">个人简历</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/about/me.html" class="nav-link">
  自我介绍&amp;项目经验
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/basic/js.html" class="nav-link">
  前端基础JS系列
</a></li><li class="dropdown-item"><!----> <a href="/blog/basic/css.html" class="nav-link">
  前端基础CSS系列
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端进阶" class="dropdown-title"><span class="title">前端进阶</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端进阶" class="mobile-dropdown-title"><span class="title">前端进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/advanced/js.html" class="nav-link">
  Javascript进阶系列
</a></li><li class="dropdown-item"><!----> <a href="/blog/advanced/css.html" class="nav-link">
  CSS进阶系列
</a></li><li class="dropdown-item"><!----> <a href="/blog/advanced/node.html" class="nav-link">
  Node.js进阶系列
</a></li><li class="dropdown-item"><!----> <a href="/blog/advanced/performance.html" class="nav-link">
  性能优化系列
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端工程化" class="dropdown-title"><span class="title">前端工程化</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端工程化" class="mobile-dropdown-title"><span class="title">前端工程化</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/fe-compile/webpack-principle.html" class="nav-link">
  Webpack核心概念
</a></li><li class="dropdown-item"><!----> <a href="/blog/fe-compile/vue-cli.html" class="nav-link">
  vue-cli中webpack相关配置
</a></li><li class="dropdown-item"><!----> <a href="/blog/fe-compile/webpack-bug-list.html" class="nav-link">
  Webpack踩坑清单
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="业务沉淀" class="dropdown-title"><span class="title">业务沉淀</span> <span class="arrow down"></span></button> <button type="button" aria-label="业务沉淀" class="mobile-dropdown-title"><span class="title">业务沉淀</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/work/nuxt-notes.html" class="nav-link">
  Nuxt重构电商M站踩坑笔记
</a></li><li class="dropdown-item"><!----> <a href="/blog/work/sensors-analyse.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  神策数据分析简介及其应用
</a></li><li class="dropdown-item"><!----> <a href="/blog/scratch/material.html" class="nav-link">
  深入scratch
</a></li><li class="dropdown-item"><!----> <a href="/blog/skulpt/introduce.html" class="nav-link">
  深入skulpt
</a></li><li class="dropdown-item"><!----> <a href="/blog/work/video-autoplay.html" class="nav-link">
  H5支持Video视频自动播放技术调研
</a></li><li class="dropdown-item"><!----> <a href="/blog/work/operation-authority-vue.html" class="nav-link">
  运营侧权限控制（Vue版）
</a></li><li class="dropdown-item"><!----> <a href="/blog/work/operation-authority-react.html" class="nav-link">
  运营侧权限控制（React版）
</a></li></ul></div></div><div class="nav-item"><a href="/blog/work/home.html" class="nav-link">
  前端开发手册
</a></div><div class="nav-item"><a href="/blog/bookmark/home.html" class="nav-link">
  常用网址
</a></div><div class="nav-item"><a href="https://github.com/james9527" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="个人简历" class="dropdown-title"><span class="title">个人简历</span> <span class="arrow down"></span></button> <button type="button" aria-label="个人简历" class="mobile-dropdown-title"><span class="title">个人简历</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/about/me.html" class="nav-link">
  自我介绍&amp;项目经验
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/basic/js.html" class="nav-link">
  前端基础JS系列
</a></li><li class="dropdown-item"><!----> <a href="/blog/basic/css.html" class="nav-link">
  前端基础CSS系列
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端进阶" class="dropdown-title"><span class="title">前端进阶</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端进阶" class="mobile-dropdown-title"><span class="title">前端进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/advanced/js.html" class="nav-link">
  Javascript进阶系列
</a></li><li class="dropdown-item"><!----> <a href="/blog/advanced/css.html" class="nav-link">
  CSS进阶系列
</a></li><li class="dropdown-item"><!----> <a href="/blog/advanced/node.html" class="nav-link">
  Node.js进阶系列
</a></li><li class="dropdown-item"><!----> <a href="/blog/advanced/performance.html" class="nav-link">
  性能优化系列
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端工程化" class="dropdown-title"><span class="title">前端工程化</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端工程化" class="mobile-dropdown-title"><span class="title">前端工程化</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/fe-compile/webpack-principle.html" class="nav-link">
  Webpack核心概念
</a></li><li class="dropdown-item"><!----> <a href="/blog/fe-compile/vue-cli.html" class="nav-link">
  vue-cli中webpack相关配置
</a></li><li class="dropdown-item"><!----> <a href="/blog/fe-compile/webpack-bug-list.html" class="nav-link">
  Webpack踩坑清单
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="业务沉淀" class="dropdown-title"><span class="title">业务沉淀</span> <span class="arrow down"></span></button> <button type="button" aria-label="业务沉淀" class="mobile-dropdown-title"><span class="title">业务沉淀</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/work/nuxt-notes.html" class="nav-link">
  Nuxt重构电商M站踩坑笔记
</a></li><li class="dropdown-item"><!----> <a href="/blog/work/sensors-analyse.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  神策数据分析简介及其应用
</a></li><li class="dropdown-item"><!----> <a href="/blog/scratch/material.html" class="nav-link">
  深入scratch
</a></li><li class="dropdown-item"><!----> <a href="/blog/skulpt/introduce.html" class="nav-link">
  深入skulpt
</a></li><li class="dropdown-item"><!----> <a href="/blog/work/video-autoplay.html" class="nav-link">
  H5支持Video视频自动播放技术调研
</a></li><li class="dropdown-item"><!----> <a href="/blog/work/operation-authority-vue.html" class="nav-link">
  运营侧权限控制（Vue版）
</a></li><li class="dropdown-item"><!----> <a href="/blog/work/operation-authority-react.html" class="nav-link">
  运营侧权限控制（React版）
</a></li></ul></div></div><div class="nav-item"><a href="/blog/work/home.html" class="nav-link">
  前端开发手册
</a></div><div class="nav-item"><a href="/blog/bookmark/home.html" class="nav-link">
  常用网址
</a></div><div class="nav-item"><a href="https://github.com/james9527" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>神策数据分析简介及其应用</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/work/sensors-analyse.html#part1-神策分析简介" class="sidebar-link">Part1 神策分析简介</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/work/sensors-analyse.html#part2-行为分析常用名词" class="sidebar-link">Part2 行为分析常用名词</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/work/sensors-analyse.html#维度" class="sidebar-link">维度</a></li><li class="sidebar-sub-header"><a href="/blog/work/sensors-analyse.html#指标" class="sidebar-link">指标</a></li><li class="sidebar-sub-header"><a href="/blog/work/sensors-analyse.html#访客" class="sidebar-link">访客</a></li><li class="sidebar-sub-header"><a href="/blog/work/sensors-analyse.html#页面浏览量" class="sidebar-link">页面浏览量</a></li><li class="sidebar-sub-header"><a href="/blog/work/sensors-analyse.html#停留时长" class="sidebar-link">停留时长</a></li><li class="sidebar-sub-header"><a href="/blog/work/sensors-analyse.html#跳出率" class="sidebar-link">跳出率</a></li><li class="sidebar-sub-header"><a href="/blog/work/sensors-analyse.html#转化率" class="sidebar-link">转化率</a></li><li class="sidebar-sub-header"><a href="/blog/work/sensors-analyse.html#交互深度" class="sidebar-link">交互深度</a></li><li class="sidebar-sub-header"><a href="/blog/work/sensors-analyse.html#总次数指标" class="sidebar-link">总次数指标</a></li><li class="sidebar-sub-header"><a href="/blog/work/sensors-analyse.html#触发用户数指标" class="sidebar-link">触发用户数指标</a></li><li class="sidebar-sub-header"><a href="/blog/work/sensors-analyse.html#人均次数指标" class="sidebar-link">人均次数指标</a></li></ul></li><li><a href="/blog/work/sensors-analyse.html#part3-埋点代码常规配置" class="sidebar-link">Part3 埋点代码常规配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/work/sensors-analyse.html#神策全埋点" class="sidebar-link">神策全埋点</a></li><li class="sidebar-sub-header"><a href="/blog/work/sensors-analyse.html#神策埋点登录态" class="sidebar-link">神策埋点登录态</a></li><li class="sidebar-sub-header"><a href="/blog/work/sensors-analyse.html#按钮点击埋点-示例" class="sidebar-link">按钮点击埋点（示例）</a></li></ul></li><li><a href="/blog/work/sensors-analyse.html#part4-查看神策上报日志" class="sidebar-link">Part4 查看神策上报日志</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/work/sensors-analyse.html#part5-session分析及其应用" class="sidebar-link">Part5 Session分析及其应用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/work/sensors-analyse.html#创建session示例" class="sidebar-link">创建Session示例</a></li><li class="sidebar-sub-header"><a href="/blog/work/sensors-analyse.html#合理定义session切割时间" class="sidebar-link">合理定义Session切割时间</a></li><li class="sidebar-sub-header"><a href="/blog/work/sensors-analyse.html#查看用户访问页面深度" class="sidebar-link">查看用户访问页面深度</a></li></ul></li><li><a href="/blog/work/sensors-analyse.html#part6-基础指标查询举例" class="sidebar-link">Part6 基础指标查询举例</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/work/sensors-analyse.html#_1-查看每日的-pv-和-uv" class="sidebar-link">1. 查看每日的 PV 和 UV</a></li><li class="sidebar-sub-header"><a href="/blog/work/sensors-analyse.html#_2-查看页面停留时长" class="sidebar-link">2. 查看页面停留时长</a></li><li class="sidebar-sub-header"><a href="/blog/work/sensors-analyse.html#_3-电商场景创建购买转化漏斗" class="sidebar-link">3. 电商场景创建购买转化漏斗</a></li></ul></li><li><a href="/blog/work/sensors-analyse.html#part7-神策官方文档" class="sidebar-link">Part7 神策官方文档</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/work/sensors-analyse.html#神策分析2-0部分官方文档" class="sidebar-link">神策分析2.0部分官方文档</a></li><li class="sidebar-sub-header"><a href="/blog/work/sensors-analyse.html#神策官方demo" class="sidebar-link">神策官方Demo</a></li><li class="sidebar-sub-header"><a href="/blog/work/sensors-analyse.html#神策技术指南" class="sidebar-link">神策技术指南</a></li></ul></li><li><a href="/blog/work/sensors-analyse.html#part8-浅谈神策web-sdk" class="sidebar-link">Part8 浅谈神策Web SDK</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="神策数据分析简介及其应用"><a href="#神策数据分析简介及其应用" class="header-anchor">#</a> 神策数据分析简介及其应用</h1> <h2 id="part1-神策分析简介"><a href="#part1-神策分析简介" class="header-anchor">#</a> Part1 神策分析简介</h2> <p>神策分析，是针对企业级客户推出的深度用户行为分析产品，支持私有化部署，客户端、服务器、业务数据、第三方数据的全端采集和建模，驱动营销渠道效果评估、用户精细化运营改进、产品功能及用户体验优化、老板看板辅助管理决策、产品个性化推荐改造、用户标签体系构建等应用场景。作为 PaaS 平台支持二次开发，可通过 BI、大数据平台、CRM、ERP 等内部 IT 系统，构建用户数据体系，让用户行为数据发挥深远的价值。<a href="https://manual.sensorsdata.cn/sa/latest/%E7%A5%9E%E7%AD%96%E5%88%86%E6%9E%90%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F-22249853.html" target="_blank" rel="noopener noreferrer">更多<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="part2-行为分析常用名词"><a href="#part2-行为分析常用名词" class="header-anchor">#</a> Part2 行为分析常用名词</h2> <h3 id="维度"><a href="#维度" class="header-anchor">#</a> 维度</h3> <p>维度描述的是一个事物身上所具备的特征或属性。比如一个人属于什么性别，生活在哪个城市，喜欢什么颜色，这些都是这个人身上所具备的属性特征。在网站分析领域，维度往往用来描述和分析指标，比如单一的访问数指标并不能告诉你太多信息，一旦加上来源这个维度，就马上变得有意义了。</p> <h3 id="指标"><a href="#指标" class="header-anchor">#</a> 指标</h3> <p>指标，即具体的数值。比如访客、页面浏览量、停留时长都属于常见的指标。一般可分为计数指标和复合指标。计数指标如访客、访问、页面浏览量、停留时长等；复合指标如跳出率、交互深度、转化率等。指标一般伴随维度来分析才有更大的意义。</p> <h3 id="访客"><a href="#访客" class="header-anchor">#</a> 访客</h3> <p>通俗解释为访问网站或 App 的人。前面加上 Unique 后，即我们平常说的 UV，唯一身份访客。对于数据统计工具而言，一般用匿名 ID 来标记访问者，网页端产品是 Cookie（网站服务器投放在用户浏览器上的一小段文本），App 端产品是设备 ID。</p> <h3 id="页面浏览量"><a href="#页面浏览量" class="header-anchor">#</a> 页面浏览量</h3> <p>指页面被用户浏览的次数，严格定义上指的是用户向网站发出并完成的一个下载页面的请求，即PageView（简称PV）。</p> <p>页面浏览的概念主要适用于网页端产品，对于 App 的分析，现主要使用屏幕浏览，即 ScreenView。</p> <h3 id="停留时长"><a href="#停留时长" class="header-anchor">#</a> 停留时长</h3> <p>对应于用户 Session，便有了停留时长指标，主要用来衡量用户与网站、App 交互的深度。交互越深，相应停留的时长也越长。</p> <p>一般有页面停留时长，会话时长以及平均停留时长等概念，其计算的核心原理在于记录下用户行为发生时的时间戳，后期再应用相应公式来计算。</p> <h3 id="跳出率"><a href="#跳出率" class="header-anchor">#</a> 跳出率</h3> <p>一个衡量落地页质量好坏的重要指标。跳出的概念是指用户在一次访问中仅做了一次互动便选择了离开，单一页面和全站均有跳出率的概念。页面跳出率为该页面跳出的访问次数占该页面总访问次数的百分比。全站跳出率则为跳出的访问次数除以总的访问次数。</p> <h3 id="转化率"><a href="#转化率" class="header-anchor">#</a> 转化率</h3> <p>任何产品都需要关注的核心指标，主要用来衡量用户从流量到发生实际目标转化的能力。一般用目标转化的次数或人数除以进入目标转化漏斗的人数或次数，因目标行为的不同，转化率是一个非常灵活的指标，比如你可以自定义注册转化率、登录转化率、购买转化率、搜索成功转化率等。</p> <h3 id="交互深度"><a href="#交互深度" class="header-anchor">#</a> 交互深度</h3> <p>交互深度是指用户在一次浏览网站或 App 过程中，访问了多少页面。用户在一次浏览中访问的页面越多，交互深度就越深。交互深度能够侧面反映网站或 App 对于用户的吸引力。
可以通过 Session 来计算用户的平均交互深度。</p> <h3 id="总次数指标"><a href="#总次数指标" class="header-anchor">#</a> 总次数指标</h3> <p>事件分析功能常用指标，指在选定的时间范围内，某一事件被触发的次数。
比如选择页面浏览事件，按总次数查看时，计算出来的值即为页面浏览量。</p> <h3 id="触发用户数指标"><a href="#触发用户数指标" class="header-anchor">#</a> 触发用户数指标</h3> <p>事件分析功能常用指标，指在选定的时间范围内，触发某一事件的独立用户数。
比如选择注册成功事件，按独立用户数查看时，计算出来的值即为选择时间范围内的注册成功人数。</p> <h3 id="人均次数指标"><a href="#人均次数指标" class="header-anchor">#</a> 人均次数指标</h3> <p>事件分析功能常用指标，指在选定的时间范围内，独立用户触发某一事件的平均次数。
比如选择页面浏览事件，按人均次数查看时，计算出来的值即为人均页面浏览次数。</p> <h2 id="part3-埋点代码常规配置"><a href="#part3-埋点代码常规配置" class="header-anchor">#</a> Part3 埋点代码常规配置</h2> <h3 id="神策全埋点"><a href="#神策全埋点" class="header-anchor">#</a> 神策全埋点</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 注册公共属性</span>
<span class="token keyword">let</span> sensorsProps <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">current_url</span><span class="token operator">:</span> location<span class="token punctuation">.</span>href<span class="token punctuation">,</span>
  <span class="token literal-property property">referrer</span><span class="token operator">:</span> document<span class="token punctuation">.</span>referrer<span class="token punctuation">,</span>
  <span class="token literal-property property">platform_type</span><span class="token operator">:</span> <span class="token string">'H5'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
sensors<span class="token punctuation">.</span><span class="token function">registerPage</span><span class="token punctuation">(</span>sensorsProps<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//调用代码之后，SDK 就会自动收集页面浏览事件</span>
sensors<span class="token punctuation">.</span><span class="token function">quick</span><span class="token punctuation">(</span><span class="token string">'autoTrack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="神策埋点登录态"><a href="#神策埋点登录态" class="header-anchor">#</a> 神策埋点登录态</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 神策埋点登录态</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>sensors<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  sensors<span class="token punctuation">.</span><span class="token function">quick</span><span class="token punctuation">(</span><span class="token string">&quot;isReady&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    sensors<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span>data<span class="token punctuation">.</span>openId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    sensors<span class="token punctuation">.</span><span class="token function">setProfile</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">email</span><span class="token operator">:</span> rs<span class="token punctuation">.</span>data<span class="token punctuation">.</span>email<span class="token punctuation">,</span>
      <span class="token literal-property property">displayName</span><span class="token operator">:</span> rs<span class="token punctuation">.</span>data<span class="token punctuation">.</span>displayName<span class="token punctuation">,</span>
      <span class="token literal-property property">gender</span><span class="token operator">:</span> rs<span class="token punctuation">.</span>data<span class="token punctuation">.</span>gender<span class="token punctuation">,</span>
      <span class="token literal-property property">creator_name</span><span class="token operator">:</span> rs<span class="token punctuation">.</span>data<span class="token punctuation">.</span>displayName<span class="token punctuation">,</span>
      <span class="token literal-property property">creator_id</span><span class="token operator">:</span> rs<span class="token punctuation">.</span>data<span class="token punctuation">.</span>openId
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="按钮点击埋点-示例"><a href="#按钮点击埋点-示例" class="header-anchor">#</a> 按钮点击埋点（示例）</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">clickPostTrack</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// let page_name = &quot;首页-&quot; + document.querySelector(&quot;.CF_tab .van-tab--active &gt; span&quot;).textContent;</span>
  <span class="token keyword">let</span> page_name <span class="token operator">=</span> <span class="token string">&quot;首页&quot;</span><span class="token punctuation">;</span>
  sensors<span class="token punctuation">.</span><span class="token function">track</span><span class="token punctuation">(</span><span class="token string">&quot;clickPost&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">page_name</span><span class="token operator">:</span> page_name<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 加入圈子埋点</span>
<span class="token function">clickJoinSociety</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> page_name <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.CF_tab .van-tab--active &gt; span&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    page_name <span class="token operator">=</span>
      <span class="token string">&quot;首页-&quot;</span> <span class="token operator">+</span>
      document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.CF_tab .van-tab--active &gt; span&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>textContent<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  sensors<span class="token punctuation">.</span><span class="token function">track</span><span class="token punctuation">(</span><span class="token string">&quot;joinSociety&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">page_name</span><span class="token operator">:</span> page_name <span class="token operator">+</span> <span class="token string">&quot;资源位&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">module_name</span><span class="token operator">:</span> <span class="token string">&quot;首页&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">society_type</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>circleObj<span class="token punctuation">.</span>groupTypeName<span class="token punctuation">,</span>
    <span class="token literal-property property">society_id</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>circleObj<span class="token punctuation">.</span>relationId<span class="token punctuation">,</span>
    <span class="token literal-property property">society_name</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>circleObj<span class="token punctuation">.</span>groupNickname<span class="token punctuation">,</span>
    <span class="token literal-property property">enter_time</span><span class="token operator">:</span> <span class="token function">dateTimeFormat</span><span class="token punctuation">(</span><span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;YYYY-MM-DD HH:mm:ss&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h4 id="查询sk社区发帖按钮点击次数示例"><a href="#查询sk社区发帖按钮点击次数示例" class="header-anchor">#</a> &gt;&gt;查询SK社区发帖按钮点击次数示例</h4> <p><img src="https://svw-dev-copadmin.oss-cn-shanghai.aliyuncs.com/test/2022/WechatIMG61.png" alt="SK社区发帖按钮点击"></p> <h2 id="part4-查看神策上报日志"><a href="#part4-查看神策上报日志" class="header-anchor">#</a> Part4 查看神策上报日志</h2> <ol><li><p>第一步，在chrome浏览器的「开发者工具」之「Network」工具栏下，可筛选出<code>sa.gif</code>请求进行日志分析，完整复制出请求参数里data的值（加密日志），操作步骤如下：
<img src="https://svw-dev-copadmin.oss-cn-shanghai.aliyuncs.com/test/2022/A4536A30-D7F8-49B6-AB53-7186068A78EB.png" alt="chrome浏览器复制神策日志"></p></li> <li><p>第二步，将拷贝出来的加密日志粘贴到<a href="https://www.sensorsdata.cn/tools/decode.html" target="_blank" rel="noopener noreferrer">神策官方提供的解码工具<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>左侧区域，点击左上角「JS数据解码」按钮，即可将解码后的神策上报日志信息展示在右侧区域，操作步骤如下：
<img src="https://svw-dev-copadmin.oss-cn-shanghai.aliyuncs.com/test/2022/550B050E-48AA-454D-901C-E6B566BFE43E.png" alt="神策日志解码截图"></p></li></ol> <h2 id="part5-session分析及其应用"><a href="#part5-session分析及其应用" class="header-anchor">#</a> Part5 Session分析及其应用</h2> <blockquote><p>第一次进行 Session 分析之前，首先需要在“元数据”的“Session管理”里创建 Session。这里对 Session 的相关概念进行说明：</p></blockquote> <p>在 a 处选择已经创建的 Session。在 b 处选择此 Session 中的事件，选择“Session总体”可以对 Session 整体情况进行分析。在 b 处选择事件，则 c 中对应的指标也会发生变化。在 c 中选择具体指标，除一些通用指标外，还包含 b 处所选事件的属性的指标。d 处圈红的是 “Session 属性”，每个 Session 内首次触发事件的属性的并集。下边对几个主要概念进行说明：</p> <ol><li>跳出率： Session 中只发生一个事件的 Session 个数除以总 Session 数。比如有三个 Session，第一个 Session 事件序列为 A,B；第二个 Session 事件序列为 A；第三个 Session 事件序列为 A,C,B；则 Session 总体的跳出率为 1/3。</li> <li>退出率： Session 的退出率包括 Session 中某个事件的退出率 和 Session中任意事件的退出率。某个事件的退出率指该事件作为 Session 的结束事件的次数除以该事件发生次数，任意事件退出率指 Session 数除以 Session 中所有事件发生次数。比如有三个 Session，第一个 Session 事件序列为A,B；第二个 Session 事件序列为A；第三个 Session 事件序列为A,C,A；则 Session 中A事件的退出率为 2/4, 任意事件的退出率为 3/6。</li> <li>Session 时长： Session 内最后一个事件触发的时间减去 Session 内第一个事件触发的时间。</li> <li>Session 深度： Session 内触发事件的次数。</li> <li>Session 内事件时长： 假如某 Session 内事件触发顺序为 a &gt; b &gt; c &gt; d，则事件 a 的时长为 b 减去 a，事件 d 的时长未知。</li> <li>Session 初始事件： Session 内第一次触发的事件。</li> <li>Session 属性： d 处的 Session 属性是指一个 Session 中初始事件的属性。比如一个 Session 的事件序列为 A,B,C；A 事件的操作系统为 iOS，B 事件的操作系统为 Android，C 事件的操作系统为空，则这个 Session 中的 Session 属性操作系统应该是 iOS，是第一个事件对应的操作系统属性值。</li></ol> <h3 id="创建session示例"><a href="#创建session示例" class="header-anchor">#</a> 创建Session示例</h3> <p><img src="https://svw-dev-copadmin.oss-cn-shanghai.aliyuncs.com/test/2022/23DF9C1A-BD2C-4123-B741-7515F3AD9149.png" alt="创建Session示例"></p> <h3 id="合理定义session切割时间"><a href="#合理定义session切割时间" class="header-anchor">#</a> 合理定义Session切割时间</h3> <p>Web 页面浏览事件Session合理的切割时间可设置为 30 分钟（经验值），场景：用户A吃午饭前浏览了SK社区页面10min，中午吃个午饭花了30min，随后又在饭后时间再次浏览了一会SK社区页面。一个用户在一天内可能多次浏览一个网站，于是就有必要在一个Session时间后重新计数。</p> <h3 id="查看用户访问页面深度"><a href="#查看用户访问页面深度" class="header-anchor">#</a> 查看用户访问页面深度</h3> <blockquote><p>定义：等于所有 Session 内事件数之和除以总的 Session 数。</p></blockquote> <p>交互深度是指用户在一次浏览网站或 App 过程中，访问了多少页面。于是可以在“行为事件分析”功能中，选择「Session总体」下「Session深度」的「均值」指标进行过滤，官方示例：
<img src="https://manual.sensorsdata.cn/sa/files/2.0/7548706/7548744/1/1590132633000/image2020-5-22_15-30-32.png" alt="平均交互深度"></p> <h2 id="part6-基础指标查询举例"><a href="#part6-基础指标查询举例" class="header-anchor">#</a> Part6 基础指标查询举例</h2> <blockquote><p>背景：VW和SK前端项目分别使用了相同的project，因此查询指标数据时有必要添加「页面地址」事件属性，且包含「页面根地址」或「域名」去筛选对应项目（Web站点）的数据。</p></blockquote> <h3 id="_1-查看每日的-pv-和-uv"><a href="#_1-查看每日的-pv-和-uv" class="header-anchor">#</a> 1. 查看每日的 PV 和 UV</h3> <ul><li>网页端，可使用全埋点事件 Web页面浏览事件查看 PV、UV（ Web页面浏览事件的采集时机是在开启全埋点的情况下，打开页面时，即会采集一个 Web页面浏览事件）</li> <li>App端，可使用神策的全埋点事件 App 启动事件查看每日的PV、UV（App 启动事件的触发时机为在开启全埋点的情况下，每次打开 App 或者从后台唤醒 App 时，都会触发一次 App 启动事件）</li></ul> <h4 id="查看sk新社区pv数"><a href="#查看sk新社区pv数" class="header-anchor">#</a> 查看SK新社区PV数</h4> <blockquote><p>定义：网页浏览是指浏览器加载（或重新加载）网页的实例。页面浏览量可以定义为网页浏览总次数的指标。</p></blockquote> <p><img src="https://svw-dev-copadmin.oss-cn-shanghai.aliyuncs.com/test/2022/8754E020-FB66-4D77-9236-8F06E1108D74.png" alt="SK新社区PV数"></p> <h4 id="查看sk新社区uv数"><a href="#查看sk新社区uv数" class="header-anchor">#</a> 查看SK新社区UV数</h4> <blockquote><p>定义：1 天（00:00-24:00）之内，访问网站的不重复用户数，一天内同一访客多次访问网站只被计算 1 次。</p></blockquote> <p><img src="https://svw-dev-copadmin.oss-cn-shanghai.aliyuncs.com/test/2022/E9F18CC9-B636-4A89-A713-EA5DD33FC66D.png" alt="SK新社区UV数"></p> <h4 id="查看某个用户pv数"><a href="#查看某个用户pv数" class="header-anchor">#</a> &gt;&gt;查看某个用户PV数</h4> <blockquote><p>日志中的 distinct_id 字段，即为神策标识用户 ID 的字段。在我们业务中，刚完成注册或刚登录场景，此 distinct_id 指的是openid（也称作idpid），否则 distinct_id 是一个神策为用户分配的匿名ID</p></blockquote> <ul><li><p>查询某个用户某一时间段页面浏览总次数示例
<img src="https://svw-dev-copadmin.oss-cn-shanghai.aliyuncs.com/test/2022/211E697D-7B12-4D76-AA7D-13A79164E36B.png" alt="查询某个用户某一时间段页面浏览总次数示例"></p></li> <li><p>多个指标联合查询示例
<img src="https://svw-dev-copadmin.oss-cn-shanghai.aliyuncs.com/test/2022/69FF5A8B-AD26-44B0-8E9C-EBA9B7004D6B.png" alt="多个指标联合查询示例"></p></li></ul> <h3 id="_2-查看页面停留时长"><a href="#_2-查看页面停留时长" class="header-anchor">#</a> 2. 查看页面停留时长</h3> <p>神策预置的 Web 页面浏览／App 页面浏览／小程序页面浏览事件，默认是不采集每个页面的浏览时长。如果想分析每个页面的浏览时长，有两个办法：</p> <ol><li>客户需要自定义埋点采集每个页面浏览时长属性，这样计算的结果更精确，但是埋点比较耗时。</li> <li>使用 Session 分析，通过 Session 的定义，大致计算出每个页面的浏览时长（大致的含义是 session 定义不同，每个事件的时长计算结果也可能不同），然后再分析时长相关的指标。下面以 Session 分析，介绍如何分析 Web 端页面浏览时长。（App 端和小程序端的分析类似，Session 包含的事件需要换成 App 页面浏览/小程序页面浏览事件）</li></ol> <h4 id="查看页面停留时长示例"><a href="#查看页面停留时长示例" class="header-anchor">#</a> &gt;&gt;查看页面停留时长示例</h4> <p><img src="https://svw-dev-copadmin.oss-cn-shanghai.aliyuncs.com/test/2022/F07F7E0A-32EF-48DF-A8C0-5C211230492B.png" alt="查看Web视区停留即页面平均访问时长"></p> <h3 id="_3-电商场景创建购买转化漏斗"><a href="#_3-电商场景创建购买转化漏斗" class="header-anchor">#</a> 3. 电商场景创建购买转化漏斗</h3> <blockquote><p>可以假设这样一种场景，用户从看到某一个促销活动到最终购买，可能会经历这样一个过程“浏览活动页—浏览商品列表页—浏览商品详情页—加入购物车—提交订单—支付订单”，我们可以对这样一个过程建立一个购买转化漏斗，来帮助你分析一个多步骤过程中每一步的转化与流失情况。</p></blockquote> <p><img src="https://www.sensorsdata.cn/manual/img/config_basic_target_27.png" alt="电商场景创建购买转化漏斗"></p> <h2 id="part7-神策官方文档"><a href="#part7-神策官方文档" class="header-anchor">#</a> Part7 神策官方文档</h2> <h3 id="神策分析2-0部分官方文档"><a href="#神策分析2-0部分官方文档" class="header-anchor">#</a> 神策分析2.0部分官方文档</h3> <blockquote><p>生产环境部署的神策后台版本是2.0.x，因此建议查阅神策官方文档时，匹配对应的系统版本会更准确。</p></blockquote> <p><a href="https://manual.sensorsdata.cn/sa/2.0/%E4%BA%A7%E5%93%81%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97-1573393.html" target="_blank" rel="noopener noreferrer">神策产品使用指南<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://manual.sensorsdata.cn/sa/2.0/%E5%9F%BA%E7%A1%80%E6%8C%87%E6%A0%87%E9%85%8D%E7%BD%AE%E8%AF%B4%E6%98%8E-7548706.html" target="_blank" rel="noopener noreferrer">基础指标配置说明<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://www.sensorsdata.cn/blog/ru-he-ying-yong-sensors-analytics-jin-xing-session-fen-xi/" target="_blank" rel="noopener noreferrer">《如何应用 Sensors Analytics 进行 Session 分析》<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://manual.sensorsdata.cn/sa/2.0/%E5%8A%9F%E8%83%BD%E5%BA%94%E7%94%A8%E7%A4%BA%E4%BE%8B-7536938.html" target="_blank" rel="noopener noreferrer">行业实践 - 功能应用示例<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="神策官方demo"><a href="#神策官方demo" class="header-anchor">#</a> 神策官方Demo</h3> <p><a href="https://family.demo.sensorsdata.cn/dashboard/?project=EbizDemo&amp;product=sbp_family&amp;id=421&amp;dash_type=lego" target="_blank" rel="noopener noreferrer">神策官方Demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="神策技术指南"><a href="#神策技术指南" class="header-anchor">#</a> 神策技术指南</h3> <h4 id="如何准确的标识用户"><a href="#如何准确的标识用户" class="header-anchor">#</a> 如何准确的标识用户</h4> <blockquote><p>用户在完成注册或登录前，神策会为用户分配一个匿名 ID 来标识用户，将该匿名 ID 作为 distinct_id 来记录用户的事件数据。当用户完成注册或登录之后，通过调用神策接口尝试进行用户关联。在关联成功的情况下，匿名 ID 和该登录 ID 发生的所有行为都会被认为是同一个用户实体发生的，在进行事件、漏斗、留存等用户相关的分析时会算作是一个用户。</p></blockquote> <h5 id="匿名id生成规则"><a href="#匿名id生成规则" class="header-anchor">#</a> 匿名ID生成规则</h5> <ul><li>web端：默认情况下使用 cookie_id 作为匿名 ID。</li> <li>小程序端：默认情况下使用 UUID 作为匿名 ID，但是删除小程序，UUID 会变。为了保证匿名 ID 不变，建议通过获取 open_id 作为匿名 ID。
如果选择使用open_id作为匿名ID的话，请注意【操作暂存】，由于获取 openid 是一个异步的操作，但是冷启动事件等会先发生，这时候这个冷启动事件的 distinct_id 就不对了。所以我们会把先发生的操作，暂存起来，等获取到 openid 等后调用 sa.init() 后才会发送数据。 open_id 的获取和操作暂存的方法请参考下述文档。</li></ul> <h5 id="用户关联具体步骤"><a href="#用户关联具体步骤" class="header-anchor">#</a> 用户关联具体步骤</h5> <ul><li>JavaScript SDK 获取 Cookie 中的 distinct_id ，可以通过 sensors.store.getDistinctId() 方法获取。</li> <li>安卓 SDK：通过 getAnonymousId 方法 获取神策分析 SDK 分配的 匿名 ID，String AnonymousId=SensorsDataAPI.sharedInstance().getAnonymousId();</li> <li>iOS SDK：通过 anonymousId 方法可获取神策分析 iOS SDK 分配的 匿名 ID，获取当前用户的匿名id NSString *anonymousId = [[SensorsAnalyticsSDK sharedInstance] anonymousId];（swift 代码示例：let anonymousId:String = SensorsAnalyticsSDK.sharedInstance().anonymousId()）。</li></ul> <h5 id="延伸-从cookie中查看distinct-id"><a href="#延伸-从cookie中查看distinct-id" class="header-anchor">#</a> 延伸：&gt;&gt;从Cookie中查看distinct_id</h5> <p><img src="https://svw-dev-copadmin.oss-cn-shanghai.aliyuncs.com/test/2022/BF66C947-8943-47F3-A509-8CC95385492C.png" alt="从Cookie中提取distinct_id"></p> <h2 id="part8-浅谈神策web-sdk"><a href="#part8-浅谈神策web-sdk" class="header-anchor">#</a> Part8 浅谈神策Web SDK</h2> <blockquote><p>从<code>sd.store.init()</code>开始探究神策Web SDK源码，简单了解下它是如何写入<code>sensorsdata2015jssdkcross</code>cookie的，以及如何操作<code>distinct_id</code>，附上SDK部分源码（sa-sdk-javascript/product/sensorsdata.full.js）</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token keyword">var</span> store <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">requests</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">_sessionState</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">_state</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">distinct_id</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      <span class="token literal-property property">first_id</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">getProps</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_state<span class="token punctuation">.</span>props <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">getSessionProps</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_sessionState<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">getDistinctId</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_state<span class="token punctuation">.</span>_distinct_id <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_state<span class="token punctuation">.</span>distinct_id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">getUnionId</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> firstId <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_state<span class="token punctuation">.</span>_first_id <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_state<span class="token punctuation">.</span>first_id<span class="token punctuation">,</span>
        distinct_id <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_state<span class="token punctuation">.</span>_distinct_id <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_state<span class="token punctuation">.</span>distinct_id<span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>firstId <span class="token operator">&amp;&amp;</span> distinct_id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        obj<span class="token punctuation">.</span>login_id <span class="token operator">=</span> distinct_id<span class="token punctuation">;</span>
        obj<span class="token punctuation">.</span>anonymous_id <span class="token operator">=</span> firstId<span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        obj<span class="token punctuation">.</span>anonymous_id <span class="token operator">=</span> distinct_id<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">getFirstId</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_state<span class="token punctuation">.</span>_first_id <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_state<span class="token punctuation">.</span>first_id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">getCookieName</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> sub <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>sd<span class="token punctuation">.</span>para<span class="token punctuation">.</span>cross_subdomain <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
          sub <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token constant">URL</span><span class="token punctuation">(</span>location<span class="token punctuation">.</span>href<span class="token punctuation">)</span><span class="token punctuation">.</span>hostname<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          sd<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> sub <span class="token operator">===</span> <span class="token string">'string'</span> <span class="token operator">&amp;&amp;</span> sub <span class="token operator">!==</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          sub <span class="token operator">=</span> <span class="token string">'sa_jssdk_2015_'</span> <span class="token operator">+</span> sub<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">'_'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          sub <span class="token operator">=</span> <span class="token string">'sa_jssdk_2015_root'</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        sub <span class="token operator">=</span> <span class="token string">'sensorsdata2015jssdkcross'</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> sub<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">init</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initSessionState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> uuid <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token constant">UUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> cross <span class="token operator">=</span> _<span class="token punctuation">.</span>cookie<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getCookieName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      cross <span class="token operator">=</span> _<span class="token punctuation">.</span>cookie<span class="token punctuation">.</span><span class="token function">resolveValue</span><span class="token punctuation">(</span>cross<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>cross <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        sd<span class="token punctuation">.</span>is_first_visitor <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'distinct_id'</span><span class="token punctuation">,</span> uuid<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>_<span class="token punctuation">.</span><span class="token function">isJSONString</span><span class="token punctuation">(</span>cross<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token operator">!</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>cross<span class="token punctuation">)</span><span class="token punctuation">.</span>distinct_id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          sd<span class="token punctuation">.</span>is_first_visitor <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">toState</span><span class="token punctuation">(</span>cross<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      saNewUser<span class="token punctuation">.</span><span class="token function">setDeviceId</span><span class="token punctuation">(</span>uuid<span class="token punctuation">)</span><span class="token punctuation">;</span>

      saNewUser<span class="token punctuation">.</span><span class="token function">storeInitCheck</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      saNewUser<span class="token punctuation">.</span><span class="token function">checkIsFirstLatest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> saNewUser <span class="token operator">=</span> <span class="token punctuation">{</span>
   <span class="token function-variable function">setDeviceId</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">uuid</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> device_id <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> ds <span class="token operator">=</span> _<span class="token punctuation">.</span>cookie<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'sensorsdata2015jssdkcross'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      ds <span class="token operator">=</span> _<span class="token punctuation">.</span>cookie<span class="token punctuation">.</span><span class="token function">resolveValue</span><span class="token punctuation">(</span>ds<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> state <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>ds <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> _<span class="token punctuation">.</span><span class="token function">isJSONString</span><span class="token punctuation">(</span>ds<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        state <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>ds<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>state<span class="token punctuation">.</span>$device_id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          device_id <span class="token operator">=</span> state<span class="token punctuation">.</span>$device_id<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

      device_id <span class="token operator">=</span> device_id <span class="token operator">||</span> uuid<span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>sd<span class="token punctuation">.</span>para<span class="token punctuation">.</span>cross_subdomain <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        store<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'$device_id'</span><span class="token punctuation">,</span> device_id<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        state<span class="token punctuation">.</span>$device_id <span class="token operator">=</span> device_id<span class="token punctuation">;</span>
        state <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>sd<span class="token punctuation">.</span>para<span class="token punctuation">.</span>encrypt_cookie<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          state <span class="token operator">=</span> _<span class="token punctuation">.</span>cookie<span class="token punctuation">.</span><span class="token function">encrypt</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        _<span class="token punctuation">.</span>cookie<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'sensorsdata2015jssdkcross'</span><span class="token punctuation">,</span> state<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>sd<span class="token punctuation">.</span>para<span class="token punctuation">.</span>is_track_device_id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        _<span class="token punctuation">.</span>info<span class="token punctuation">.</span>currentProps<span class="token punctuation">.</span>$device_id <span class="token operator">=</span> device_id<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>  sd<span class="token punctuation">.</span><span class="token function-variable function">login</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">id<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> id <span class="token operator">===</span> <span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      id <span class="token operator">=</span> <span class="token function">String</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>saEvent<span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">distinct_id</span><span class="token operator">:</span> id
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> firstId <span class="token operator">=</span> store<span class="token punctuation">.</span><span class="token function">getFirstId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> distinctId <span class="token operator">=</span> store<span class="token punctuation">.</span><span class="token function">getDistinctId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>id <span class="token operator">!==</span> distinctId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>firstId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          store<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'first_id'</span><span class="token punctuation">,</span> distinctId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        sd<span class="token punctuation">.</span><span class="token function">trackSignup</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> <span class="token string">'$SignUp'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        callback <span class="token operator">&amp;&amp;</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      sd<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'login的参数必须是字符串'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      callback <span class="token operator">&amp;&amp;</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  sd<span class="token punctuation">.</span><span class="token function-variable function">identify</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">id<span class="token punctuation">,</span> isSave</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> id <span class="token operator">===</span> <span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      id <span class="token operator">=</span> <span class="token function">String</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">var</span> firstId <span class="token operator">=</span> store<span class="token punctuation">.</span><span class="token function">getFirstId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> id <span class="token operator">===</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> uuid <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token constant">UUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>firstId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        store<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'first_id'</span><span class="token punctuation">,</span> uuid<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        store<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'distinct_id'</span><span class="token punctuation">,</span> uuid<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>saEvent<span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">distinct_id</span><span class="token operator">:</span> id
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>isSave <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>firstId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          store<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'first_id'</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          store<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'distinct_id'</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>firstId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          store<span class="token punctuation">.</span><span class="token function">change</span><span class="token punctuation">(</span><span class="token string">'first_id'</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          store<span class="token punctuation">.</span><span class="token function">change</span><span class="token punctuation">(</span><span class="token string">'distinct_id'</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      sd<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'identify的参数必须是字符串'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.283f9e00.js" defer></script><script src="/assets/js/2.cf4fc302.js" defer></script><script src="/assets/js/66.9b2fff6b.js" defer></script>
  </body>
</html>
