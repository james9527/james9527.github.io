(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{344:function(e,t,v){"use strict";v.r(t);var _=v(10),a=Object(_.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"utils"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#utils"}},[e._v("#")]),e._v(" Utils")]),e._v(" "),t("h2",{attrs:{id:"charles"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#charles"}},[e._v("#")]),e._v(" Charles")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://www.charlesproxy.com",target:"_blank",rel:"noopener noreferrer"}},[e._v("Charles"),t("OutboundLink")],1),e._v("是一个代理服务器，简单的说法为当访问网站时，会由Charles代为获取请求相关数据，这样就达到了截取网络请求以及分析请求结果的目的。Charles是在日常工作中常用的功能包括: 代理移动端设备的请求，将远程文件代理到本地文件等。")]),e._v(" "),t("h3",{attrs:{id:"代理移动端请求"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#代理移动端请求"}},[e._v("#")]),e._v(" 代理移动端请求")]),e._v(" "),t("p",[e._v("代理移动端设备的请求指的是：将移动设备的请求代理到PC的Charles服务，以此来抓包移动端设备的请求详细信息以及使得移动端设备可以打开我们的本地服务器的资源")]),e._v(" "),t("h4",{attrs:{id:"开启设置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开启设置"}},[e._v("#")]),e._v(" 开启设置")]),e._v(" "),t("p",[e._v("为了可以在Charles中截取网络请求数据，首先需要将Charles设置为系统代理，即让Charles成为获取请求数据的委托代理方，具体操作为：选择菜单栏中 "),t("code",[e._v("proxy")]),e._v(" -> "),t("code",[e._v("Mac OS X Proxy")]),e._v(" ，使 "),t("code",[e._v("Mac OS X Proxy")]),e._v(" 前出现 "),t("code",[e._v("✔️")]),e._v(" 。")]),e._v(" "),t("p",[e._v("在charles中选择菜单栏 "),t("code",[e._v("proxy")]),e._v(" -> "),t("code",[e._v("proxy settings")]),e._v(" , 在弹出的对话框中填写端口号（默认为8888），勾选”enable transparent http proxying“。")]),e._v(" "),t("h4",{attrs:{id:"查看本机ip"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看本机ip"}},[e._v("#")]),e._v(" 查看本机IP")]),e._v(" "),t("p",[e._v("使用 "),t("code",[e._v("ifconfig")]),e._v(" 查看本机在当前局域网中的IP地址")]),e._v(" "),t("p",[t("code",[e._v("enx")]),e._v(" 代表当前的第x块网卡，当前我们只有一块网卡，故 "),t("code",[e._v("192.168.199.161")]),e._v(" 是我们当前的局域网ip地址")]),e._v(" "),t("h4",{attrs:{id:"移动端开启代理设置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#移动端开启代理设置"}},[e._v("#")]),e._v(" 移动端开启代理设置")]),e._v(" "),t("p",[e._v("确保手机和电脑连接同一个无线网络，并对无线网络进行代理设置")]),e._v(" "),t("p",[t("code",[e._v("WIFI")]),e._v(" -> "),t("code",[e._v("HTTP代理")]),e._v(" -> "),t("code",[e._v("手动")]),e._v(" -> "),t("code",[e._v("填写IP以及端口号")])]),e._v(" "),t("p",[e._v("连接成功后Charles会弹窗提示，选择 "),t("code",[e._v("allow")]),e._v(" 。至此该移动设备的请求都会被Charles所代理，我们可以在PC端的Charles中看到移动设备所有 "),t("code",[e._v("http")]),e._v(" 请求的详细信息。")]),e._v(" "),t("h4",{attrs:{id:"抓包https请求"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#抓包https请求"}},[e._v("#")]),e._v(" 抓包https请求")]),e._v(" "),t("p",[e._v("由于https协议的请求安全系数较高，在截取此类请求数据时，需要安装证书等操作，此处单独列出https协议请求的操作步骤。")]),e._v(" "),t("ol",[t("li",[t("p",[e._v("在PC上安装证书。在charles中选择菜单栏 "),t("code",[e._v("help")]),e._v(" -> "),t("code",[e._v("SSL Proxying")]),e._v(" -> "),t("code",[e._v("Install Charles Root Certificate")]),e._v(" , 安装成功后，双击安装的证书进行信任处理。")])]),e._v(" "),t("li",[t("p",[e._v("在Charles选择菜单栏 "),t("code",[e._v("proxy")]),e._v(" -> "),t("code",[e._v("SSL Proxying Settings")]),e._v(" ，通过 "),t("code",[e._v("add")]),e._v(" 添加需要抓包的域名，并选中 "),t("code",[e._v("enable SSL Proxying")]),e._v(" 。至此，在PC端中即可对https请求进行抓包处理。")])]),e._v(" "),t("li",[t("p",[e._v("如果要截取移动端访问的https协议的数据，在完成上述步骤后，需要重复第一个步骤，并更改为选择菜单栏 "),t("code",[e._v("help")]),e._v(" -> "),t("code",[e._v("SSL Proxying")]),e._v(" -> "),t("code",[e._v("Install Charles Root Certificate on a Mobile Device or Remote Browser")]),e._v(" 。移动端完成无线网络配置(移动端实机测试的第四步骤)后，访问"),t("a",{attrs:{href:"http://charlesproxy.com/getssl",target:"_blank",rel:"noopener noreferrer"}},[e._v("证书地址"),t("OutboundLink")],1),e._v("，即可完成移动端设备安装证书的操作。至此，移动端访问https请求，就可以在charles中实时显示相关抓包信息。")])])]),e._v(" "),t("h3",{attrs:{id:"将远程文件代理到本地"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#将远程文件代理到本地"}},[e._v("#")]),e._v(" 将远程文件代理到本地")]),e._v(" "),t("p",[e._v("当需要在线上环境测试展示效果，而本地程序代码不确保正确的情况下，可以将线上的文件访问地址重定向到本地的文件，从而使得线上环境真正使用的为本地需要测试的文件。")]),e._v(" "),t("p",[t("code",[e._v("Map Local")]),e._v(" 是将指定的网络请求代理到本地文件，在Charles选择菜单栏 "),t("code",[e._v("Tools")]),e._v(" -> "),t("code",[e._v("Map Local")]),e._v(" ，填写需要重定向的源地址以及本地的目标文件。如果网络请求较为复杂，可在请求处右键选择 "),t("code",[e._v("Save Response")]),e._v(" 保存请求返回的数据到本地。")]),e._v(" "),t("h4",{attrs:{id:"map-from"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#map-from"}},[e._v("#")]),e._v(" Map From")]),e._v(" "),t("p",[e._v("源文件相关配置， "),t("code",[e._v("protocol")]),e._v(" 选择http或者https协议， "),t("code",[e._v("HOST")]),e._v(" 为远程服务域名， "),t("code",[e._v("PATH")]),e._v(" 为请求的路径， "),t("code",[e._v("Query")]),e._v(" 为请求查询字符串")]),e._v(" "),t("h4",{attrs:{id:"map-to"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#map-to"}},[e._v("#")]),e._v(" Map To")]),e._v(" "),t("p",[e._v("为本地文件地址，可以为单文件或者文件夹的地址")]),e._v(" "),t("p",[e._v("注意：如果Map From以及Map To中的数据需要区分大小写，应勾取Case-sensitive选项。")]),e._v(" "),t("p",[e._v("通过设置，我们在访问 "),t("code",[e._v("http://baidu/com/test/a.js")]),e._v(" 时，实际访问的是 "),t("code",[e._v("~/Desktop/a.js")])])])}),[],!1,null,null,null);t.default=a.exports}}]);