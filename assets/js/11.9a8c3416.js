(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{289:function(s,n,t){"use strict";t.r(n);var a=t(10),e=Object(a.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"简介"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[s._v("#")]),s._v(" 简介")]),s._v(" "),n("p",[s._v("sticky 英文字面意思是粘，粘贴，所以称之为粘性定位。sticky属性依赖于用户的滚动，在 position:relative 与 position:fixed 定位之间切换。元素定位表现为在跨越特定阈值前为相对定位，之后为固定定位。这个特定阈值指的是 top, right, bottom 或 left 之一，即指定 top, right, bottom 或 left 四个阈值其中之一，才可使粘性定位生效。")]),s._v(" "),n("h2",{attrs:{id:"使用条件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用条件"}},[s._v("#")]),s._v(" 使用条件")]),s._v(" "),n("blockquote",[n("p",[s._v("sticky属性仅在以下几个条件都满足时有效：")])]),s._v(" "),n("p",[s._v("父元素不能overflow:hidden或者overflow:auto属性，或者 当body的height为100%时，必须指定top、bottom、left、right4个值之一，否则只会处于相对定位，最终达不到你想要的效果，导致页面错乱。并且，父元素的高度不能低于sticky元素的高度。")]),s._v(" "),n("p",[s._v("本人在开发过程中，遇见一个难以置信的问题，样式top属性写了"),n("code",[s._v("0px")]),s._v("导致仅在vivo手机出现页面样式错乱问题。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("<template>\n    <div class=\"sticky\" :style=\"{top: this.top, zIndex: this.zIndex}\">\n      <slot></slot>\n    </div>\n</template>\n<script>\n    import _throttle from \"lodash.throttle\";\n    export default {\n        name: 'NavSticky',\n        props: {\n            top: {\n                type: [String],\n                default: '0' // 0像素不需要写单位px(bug出处)\n            },\n            zIndex: {\n                type: Number,\n                default: 20\n            }\n        },\n        data() {\n            return {\n                child: null,\n                stickyHeight: 0,\n                parsedTop: this.top,\n                position: 'static',\n                scrollHandlerObj: _throttle(this.scrollHandler, 800)\n            }\n        },\n        watch: {\n            position(cur) {\n                this.child.style.position = cur\n                switch (cur) {\n                    case 'sticky':\n                        this.child.style.position = 'fixed'\n                        this.child.style.top = this.top\n                        break\n                    case 'absolute':\n                        this.child.style.position = 'absolute'\n                        this.child.style.top = 'auto'\n                        this.child.style.bottom = '0'\n                        break\n                    case 'static':\n                    default:\n                        this.child.style.position = 'static'\n                }\n            }\n        },\n        methods: {\n            scrollHandler() {\n                let offset = this.$el.getBoundingClientRect()\n                let poffset = this.$el.parentElement.getBoundingClientRect()\n                let isStatic = offset.top > this.parsedTop\n                let isAbsolute = poffset.bottom < this.parsedTop + this.stickyHeight\n                this.$nextTick(() => {\n                    if (isStatic) {\n                        this.position = 'static'\n                    }\n                    else if (isAbsolute) {\n                        this.position = 'absolute'\n                    }\n                    else {\n                        this.position = 'sticky'\n                    }\n                })\n            }\n        },\n        mounted() {\n            this.$nextTick(() => {\n                let computedStyle = window.getComputedStyle(this.$el)\n                let position = computedStyle.position\n                let stickySupport = position.indexOf('sticky') > -1\n                let child = this.$el.firstElementChild\n                if (!stickySupport && child) {\n                    this.child = child\n                    child.style.zIndex = this.zIndex\n                    this.stickyHeight = parseFloat(computedStyle.height, 10)\n                    this.$el.style.position = 'static'\n                    this.$el.style.height = computedStyle.height\n                    window.addEventListener('scroll', this.scrollHandlerObj, true)\n                    this.scrollHandlerObj()\n                }\n            })\n        },\n        destroyed() {\n            window.removeEventListener(\"scroll\", this.scrollHandlerObj);\n        },\n    }\n<\/script>\n<style lang=\"less\" scoped>\n    .sticky{\n        position: -webkit-sticky;\n        position: sticky\n    }\n</style>\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br"),n("span",{staticClass:"line-number"},[s._v("70")]),n("br"),n("span",{staticClass:"line-number"},[s._v("71")]),n("br"),n("span",{staticClass:"line-number"},[s._v("72")]),n("br"),n("span",{staticClass:"line-number"},[s._v("73")]),n("br"),n("span",{staticClass:"line-number"},[s._v("74")]),n("br"),n("span",{staticClass:"line-number"},[s._v("75")]),n("br"),n("span",{staticClass:"line-number"},[s._v("76")]),n("br"),n("span",{staticClass:"line-number"},[s._v("77")]),n("br"),n("span",{staticClass:"line-number"},[s._v("78")]),n("br"),n("span",{staticClass:"line-number"},[s._v("79")]),n("br"),n("span",{staticClass:"line-number"},[s._v("80")]),n("br"),n("span",{staticClass:"line-number"},[s._v("81")]),n("br"),n("span",{staticClass:"line-number"},[s._v("82")]),n("br"),n("span",{staticClass:"line-number"},[s._v("83")]),n("br"),n("span",{staticClass:"line-number"},[s._v("84")]),n("br"),n("span",{staticClass:"line-number"},[s._v("85")]),n("br"),n("span",{staticClass:"line-number"},[s._v("86")]),n("br"),n("span",{staticClass:"line-number"},[s._v("87")]),n("br"),n("span",{staticClass:"line-number"},[s._v("88")]),n("br"),n("span",{staticClass:"line-number"},[s._v("89")]),n("br"),n("span",{staticClass:"line-number"},[s._v("90")]),n("br"),n("span",{staticClass:"line-number"},[s._v("91")]),n("br"),n("span",{staticClass:"line-number"},[s._v("92")]),n("br"),n("span",{staticClass:"line-number"},[s._v("93")]),n("br"),n("span",{staticClass:"line-number"},[s._v("94")]),n("br")])])])}),[],!1,null,null,null);n.default=e.exports}}]);